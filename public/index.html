<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#079292">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#079292">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#079292">
    <title>DogsHome | Inicio</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="scripts/main/basic-navigation.js"></script>
    <link href="stylesheets/main/style-mainpage.css" rel="stylesheet">
    <link href="stylesheets/main/content-show.css" rel="stylesheet">
    <link href="stylesheets/main/drawer-navigator-style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link rel="icon" href="images/DogsHomeLogo-ReDesign%20(Colorified&Final).png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="stylesheets/auth-ui/sign-in-style.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
</head>
<body >
<script src="scripts/main/loading-display.js"></script>
<div id="loading-visible">
    <lottie-player src="animations/dog-walking.json" background="transparent"  speed="1"  style="width: 200px; height: 200px;" loop autoplay></lottie-player>
</div>

<section id="main">
    <section id="drawer-navigator-dim" class="dim-null">
        <section id="drawer-navigator" class="drawer-closed" style="z-index: 100">

        </section>
        <section onclick="drawerAction()" style="width: 25%; height: 100%; position: absolute; top: 0; right: 0"></section>
    </section>

    <div id="search-bar">
        <img src="images/DogsHomeLogo-ReDesign%20(White&Final).png" alt style="cursor: pointer; height: 50px; width: 50px" class="desktop-elements" onclick="window.location = 'index.html'">
        <span class="material-icons-outlined" id="menu-button" style="color: #fff; cursor: pointer; margin: 0 10px; user-select: none" onclick="drawerAction()">menu</span>

        <a id="alerts-button" class="desktop-elements nav-buttons" onclick="navigateToAlerts()">Alertas</a>
        <a id="refugios-button" class="desktop-elements nav-buttons" onclick="navigateToRefs()">Refugios</a>

        <div class="" id="separatorLeft" style="flex: 1; align-items: flex-start; justify-content: flex-end; user-select: none">
        </div>
        <form id="search-form">
            <div id="search-input-container" style="width: 100%; height: 100%; max-width: 600px; flex-direction: row; display: flex; align-items: center; justify-content: center; background-color: white">
                <input type="text" id="search-input" aria-label="Buscar" placeholder="Buscar en DogsHome…" maxlength="120" autocapitalize="off" autocorrect="off" spellcheck="false" autocomplete="off" tabindex="3">
                <span class="material-icons-outlined" style="color: #d3d3d3; cursor: pointer; user-select: none" onclick="searchPost()">search</span>
            </div>
        </form>
        <div class="" id="userSpace" style="flex: 1; align-items: flex-start; justify-content: flex-end">
        </div>
        <span class="material-icons-outlined" id="fav-button" style="color: #fff; cursor: pointer; margin: 0 10px; user-select: none" onclick="navigateToFav()">favorite_border</span>
        <a class="desktop-elements nav-buttons" id="profile-name" style="margin-right: 0; padding-right: 10px" onclick="navigateToProfile">-</a>
        <img class="desktop-elements" id="profile-pic" src="https://www.uic.mx/posgrados/files/2018/05/default-user.png" alt="profile pic" style="height: 40px; width: 40px; cursor: pointer; margin-right: 10px; user-select: none; border-radius: 80px; object-fit: cover">
    </div>
    <section id="content">
        <section id="content-show">
            <!--
            <div class="publication">
                <img src="https://res.cloudinary.com/dogshome/image/upload/v1625108682/hji4aeftmk2rp0zdpzye.jpg" alt="perroFoto" class="publication-photo">
                <div class="publication-desc-cont">
                    <h1 class="publication-name">Pupi</h1>
                    <p class="publication-description">Pupi es un perro muy simpático, muy buena onda, buen cachorro. Con las otras mascotas se lleva bien, y con los chicos también. Pupi quiere estar en una casa.</p>
                </div>
                <div class="ref-name-cont">
                    <a>Mascotas en adopcion</a>
                </div>
            </div>
            -->
        </section>
    </section>
</section>

<!--Firebase Scripts -->

<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->
<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<script src="https://dogshome.softvisiondevelop.com.ar/__/firebase/8.6.5/firebase-app.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="https://dogshome.softvisiondevelop.com.ar/__/firebase/8.6.5/firebase-auth.js"></script>
<script src="https://dogshome.softvisiondevelop.com.ar/__/firebase/8.6.5/firebase-database.js"></script>
<script src="https://dogshome.softvisiondevelop.com.ar/__/firebase/init.js"></script>

<script src="scripts/auth/sign-out.js"></script>
<script src="scripts/main/open-close-drawer.js"></script>
<script src="scripts/main/get-all-publications.js"></script>
<script src="scripts/main/add-publication.js"></script>
<script src="scripts/profile/profile-settings-functions.js"></script>

<script>
    function load(){
    $( document ).ready(function() {
        if(firebase.auth().currentUser.emailVerified === true){
            var userEmail = firebase.auth().currentUser.email;
            //console.log('logged as '+userEmail.replace('.', ':'));
            readUserData(userEmail);
            getPublications();
        }else{
            window.location = "verification.html";
        }
    });
    }
</script>
<script>
    firebase.auth().onAuthStateChanged((user) => {
        if (user) {
            var uid = user.uid;
            load();
            // ...
        } else {
            window.location.href = "signin.html";
            // ...
        }
    });
</script>

<script>
    var gesture = {
            x: [],
            y: [],
            match: ''
        },
        tolerance = 100;
    window.addEventListener('touchstart',function(e){
        //e.preventDefault()
        for (i=0;i<e.touches.length;i++){
            var dot = document.createElement('div');
            dot.id = i
            dot.style.top = e.touches[i].clientY-25+'px'
            dot.style.left = e.touches[i].clientX-25+'px'
            document.body.appendChild(dot)
            gesture.x.push(e.touches[i].clientX)
            gesture.y.push(e.touches[i].clientY)
        }
    });
    window.addEventListener('touchmove',function(e){
        //e.preventDefault()
        for (var i=0; i<e.touches.length; i++) {
            var dot = document.getElementById(i);
            dot.style.top = e.touches[i].clientY-25+'px'
            dot.style.left = e.touches[i].clientX-25+'px'
            gesture.x.push(e.touches[i].clientX)
            gesture.y.push(e.touches[i].clientY)
        }
    });
    window.addEventListener('touchend',function(e){
        var dots = document.querySelectorAll('div'),
            xTravel = gesture.x[gesture.x.length-1] - gesture.x[0],
            yTravel = gesture.y[gesture.y.length-1] - gesture.y[0];
        if (xTravel<tolerance && xTravel>-tolerance && yTravel<-tolerance){
            gesture.match = 'Swiped Up'
        }
        if (xTravel<tolerance && xTravel>-tolerance && yTravel>tolerance){
            gesture.match = 'Swiped Down'
        }
        if (yTravel<tolerance && yTravel>-tolerance && xTravel<-tolerance){
            forceDrawerClose();
        }
        if (yTravel<tolerance && yTravel>-tolerance && xTravel>tolerance){
            forceDrawerOpen();
        }
        if (gesture.match!==''){
            //document.title = gesture.match;
        }
        setTimeout(function(){

        },500)
        gesture.x = []
        gesture.y = []
        gesture.match = xTravel = yTravel = ''
    })
</script>
</body>
</html>